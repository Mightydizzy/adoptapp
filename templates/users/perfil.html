{% extends "base.html" %}

{% block content %}
<div class="text-center">
  <h2>{{ usuario.first_name }} {{ usuario.last_name }}</h2>
  <p><strong>Usuario:</strong> {{ usuario.username }}</p>
  <p><strong>Email:</strong> {{ usuario.email }}</p>
  <p><strong>Ciudad:</strong> {{ usuario.ciudad|default:"No especificada" }}</p>

  {% if usuario.foto_perfil %}
    <img src="{{ usuario.foto_perfil.url }}" class="rounded-circle" width="150" height="150">
  {% else %}
    <img src="https://via.placeholder.com/150" class="rounded-circle" width="150" height="150">
  {% endif %}

  <div class="mt-3">
    <a href="{% url 'editar_perfil' %}" class="btn btn-custom">Editar perfil</a>
    <a href="{% url 'cambiar_password' %}" class="btn btn-warning">Cambiar contraseña</a>
  </div>
</div>

<hr class="my-5">

<h3 class="mb-4">🐾 Mascotas que me interesan</h3>
<div class="row">
  {% for reaccion in likes %}
    <div class="col-md-4 mb-3">
      <div class="card shadow h-100">
        <img src="{{ reaccion.mascota.foto.url }}"
             class="card-img-top"
             style="height:200px; object-fit:cover;"
             alt="{{ reaccion.mascota.nombre }}">
        <div class="card-body text-center">
          <h5>{{ reaccion.mascota.nombre }}</h5>
          <p>{{ reaccion.mascota.especie|capfirst }} · {{ reaccion.mascota.edad_legible }} · {{ reaccion.mascota.ciudad }}</p>

          <form method="post" action="{% url 'reaccionar_mascota' reaccion.mascota.id %}">
            {% csrf_token %}
            <input type="hidden" name="accion" value="descartar">
            <button type="submit" class="btn btn-outline-danger btn-sm">
              Quitar de favoritos
            </button>
          </form>
        </div>
      </div>
    </div>
  {% empty %}
    <p>No has dado like a ninguna mascota todavía 🐶🐱</p>
  {% endfor %}
</div>
{% endblock %}
